{"version":3,"file":"vue.js","sources":["../../src/util/index.js","../../src/observe/index.js","../../src/state.js","../../src/init.js","../../src/index.js"],"sourcesContent":["/**\n * \n * @param {*} data 当前数据是不是对象\n * @returns \n */\nexport function isObject(data) {\n    return typeof data === 'object' && data !== null\n}","import {isObject} from '../util/index'\n// 把data中的数据 都重新定义\n// 但Object.defineProperty 不能兼容ie8及以下 所以vue2无法兼容ie8\n\nclass Observer{\n    constructor(value) {\n        // vue如果数据的层次过多 需要第一的去解析对象中的和属性，依次增加set和get方法\n        // vue3 的proxy 不用递归也不用加set和get\n        this.walk(value)\n    }\n\n    walk(data) {\n        let keys = Object.keys(data) // [name,age,address]\n        for ( i = 0; i < keys.length; i++ ) {\n            let key = keys[i];\n            let value = data[key];\n            defineReactive(data,key,value)\n        }\n    }\n}\n\nexport function observe(data) {\n    let isObj = isObject(data)\n    // 不是对象\n    if(!isObj) {\n        return\n    }\n    // 是对象 需要观测数据 \n    return new Observer(data)\n    \n}","import {observe} from './observe/index'\nexport function initState(vm) {\n    // vue的数据来源 属性 方法 数据 计算属性 watch ,也是vue的初始化流程\n    const opts = vm.$options\n    // console.log(opts);\n    if (opts.props) {\n        initProps(vm)\n    }\n    if (opts.method) {\n        initMethods(vm)\n    }\n    if (opts.data) {\n        initData(vm)\n    }\n    if (opts.computed) {\n        initComputed(vm)\n    }\n    if (opts.watch) {\n        initWatch(vm)\n    }\n}\nfunction initProps(){}\nfunction initMethods(){}\nfunction initData(vm){\n    // 数据初始化\n    let data = vm.$options.data; // 用户传递的data\n    data = vm._data = typeof data === 'function' ? data.call(vm):data // data可能是个函数（返回值是对象），也可能是对象，只需要对象\n    console.log(data);\n    // 数据劫持 用户改变数据时 希望可以得到通知 -> 刷新页面\n    // MVVM模式 数据驱动视图变化\n    // Object.defineProperty() 给属性添加get和set方法\n    observe(data) // 响应式\n}\nfunction initComputed(){}\nfunction initWatch(){}","import {initState} from './state'\n// 在原型上增加一个init方法\nexport function initMixin(Vue) {\n    // 初始化流程\n    Vue.prototype._init = function (options) {\n        console.log(options);\n        const vm = this\n        vm.$options = options // 用户传递的属性 data,watch\n\n        // 初始化状态\n        initState(vm) \n    }\n}","import {initMixin} from './init.js'\nfunction Vue(options) {\n    this._init(options)\n}\n// 通过文件引入的方式，给vue原型挂载方法\ninitMixin(Vue)\nexport default Vue"],"names":["isObject","data","Observer","value","walk","keys","Object","i","length","key","defineReactive","observe","isObj","initState","vm","opts","$options","props","method","initData","computed","watch","_data","call","console","log","initMixin","Vue","prototype","_init","options"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA;EACA;EACA;EACA;EACA;EACO,SAASA,QAAT,CAAkBC,IAAlB,EAAwB;EAC3B,SAAO,QAAOA,IAAP,MAAgB,QAAhB,IAA4BA,IAAI,KAAK,IAA5C;EACH;;ECLD;;MAEMC;EACF,oBAAYC,KAAZ,EAAmB;EAAA;;EACf;EACA;EACA,SAAKC,IAAL,CAAUD,KAAV;EACH;;;;aAED,cAAKF,IAAL,EAAW;EACP,UAAII,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYJ,IAAZ,CAAX,CADO;;EAEP,WAAMM,CAAC,GAAG,CAAV,EAAaA,CAAC,GAAGF,IAAI,CAACG,MAAtB,EAA8BD,CAAC,EAA/B,EAAoC;EAChC,YAAIE,GAAG,GAAGJ,IAAI,CAACE,CAAD,CAAd;EACA,YAAIJ,KAAK,GAAGF,IAAI,CAACQ,GAAD,CAAhB;EACAC,QAAAA,cAAc,CAACT,IAAD,EAAMQ,GAAN,EAAUN,KAAV,CAAd;EACH;EACJ;;;;;;EAGE,SAASQ,OAAT,CAAiBV,IAAjB,EAAuB;EAC1B,MAAIW,KAAK,GAAGZ,QAAQ,CAACC,IAAD,CAApB,CAD0B;;EAG1B,MAAG,CAACW,KAAJ,EAAW;EACP;EACH,GALyB;;;EAO1B,SAAO,IAAIV,QAAJ,CAAaD,IAAb,CAAP;EAEH;;EC7BM,SAASY,SAAT,CAAmBC,EAAnB,EAAuB;EAC1B;EACA,MAAMC,IAAI,GAAGD,EAAE,CAACE,QAAhB,CAF0B;;EAI1B,MAAID,IAAI,CAACE,KAAT,EAAgB;;EAGhB,MAAIF,IAAI,CAACG,MAAT,EAAiB;;EAGjB,MAAIH,IAAI,CAACd,IAAT,EAAe;EACXkB,IAAAA,QAAQ,CAACL,EAAD,CAAR;EACH;;EACD,MAAIC,IAAI,CAACK,QAAT,EAAmB;;EAGnB,MAAIL,IAAI,CAACM,KAAT,EAAgB;EAGnB;;EAGD,SAASF,QAAT,CAAkBL,EAAlB,EAAqB;EACjB;EACA,MAAIb,IAAI,GAAGa,EAAE,CAACE,QAAH,CAAYf,IAAvB,CAFiB;;EAGjBA,EAAAA,IAAI,GAAGa,EAAE,CAACQ,KAAH,GAAW,OAAOrB,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAACsB,IAAL,CAAUT,EAAV,CAA7B,GAA2Cb,IAA7D,CAHiB;;EAIjBuB,EAAAA,OAAO,CAACC,GAAR,CAAYxB,IAAZ,EAJiB;EAMjB;EACA;;EACAU,EAAAA,OAAO,CAACV,IAAD,CAAP,CARiB;EASpB;;EC9BM,SAASyB,SAAT,CAAmBC,GAAnB,EAAwB;EAC3B;EACAA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAsB,UAAUC,OAAV,EAAmB;EACrCN,IAAAA,OAAO,CAACC,GAAR,CAAYK,OAAZ;EACA,QAAMhB,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACE,QAAH,GAAcc,OAAd,CAHqC;EAKrC;;EACAjB,IAAAA,SAAS,CAACC,EAAD,CAAT;EACH,GAPD;EAQH;;ECXD,SAASa,GAAT,CAAaG,OAAb,EAAsB;EAClB,OAAKD,KAAL,CAAWC,OAAX;EACH;;;EAEDJ,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}